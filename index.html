<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√≥n Qu√† D√†nh T·∫∑ng B·∫°n üíñ</title>
    <style>
        :root {
            --glow-color: #ff47a8;
            --heart-color: #ff4757;
        }

        body {
            margin: 0;
            height: 100dvh; /* 100dvh t·ªët h∆°n 100vh tr√™n mobile */
            display: flex;
            justify-content: center;
            align-items: center;
            background: radial-gradient(ellipse at center, #2e0b33 0%, #0a000c 70%);
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: white;
        }

        .star {
            position: fixed;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px var(--glow-color);
            animation: twinkle 5s infinite alternate;
        }

        @keyframes twinkle {
            0% { transform: scale(1); opacity: 0.8; }
            100% { transform: scale(0.8); opacity: 0.4; }
        }

        #welcome-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(10, 0, 12, 0.9);
            display: flex; justify-content: center; align-items: center;
            z-index: 100; transition: opacity 1.5s ease-out; flex-direction: column;
            padding: 20px;
            box-sizing: border-box;
        }
        #welcome-overlay.hidden { opacity: 0; pointer-events: none; }
        
        .input-container { 
            text-align: center; 
            color: white; 
            width: 90%;
        }
        
        .input-container h2 { 
            font-size: 2em; 
            text-shadow: 0 0 10px var(--glow-color); 
            margin-bottom: 25px; 
        }
        
        #name-input {
            padding: 12px 20px; 
            font-size: 1.2em; 
            border-radius: 25px;
            border: 2px solid var(--glow-color); 
            background: rgba(255, 255, 255, 0.1);
            color: white; 
            text-align: center; 
            outline: none; 
            transition: box-shadow 0.3s;
            width: 90%; 
            max-width: 400px;
            box-sizing: border-box;
        }
        #name-input:focus { box-shadow: 0 0 15px var(--glow-color); }
        
        #submit-btn {
            padding: 12px 30px; 
            font-size: 1.2em; 
            margin-top: 20px;
            border-radius: 25px; 
            border: none; 
            background: var(--heart-color);
            color: white; 
            cursor: pointer; 
            font-weight: bold; 
            transition: transform 0.2s, background 0.3s;
        }
        #submit-btn:hover { transform: scale(1.05); background: #ff6b81; }

        .scene {
            perspective: 1500px;
            position: relative;
            z-index: 10;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #heart-canvas {
            position: absolute;
            top: 50%; left: 50%;
        }

        .flying-wish {
            position: fixed;
            bottom: -100px;
            font-size: 1.2em;
            font-weight: bold;
            text-shadow: 0 0 8px var(--glow-color), 0 0 16px var(--glow-color);
            white-space: nowrap;
            z-index: 1;
            animation: flyUp 12s linear;
            will-change: transform, opacity; /* T·ªëi ∆∞u animation */
        }

        @keyframes flyUp {
            0% {
                transform: translateY(0) translateX(var(--x-start));
                opacity: 0;
            }
            15% { opacity: 1; }
            85% { opacity: 1; }
            100% {
                transform: translateY(-120vh) translateX(var(--x-end));
                opacity: 0;
            }
        }

        .flying-heart {
            position: fixed;
            bottom: -50px;
            font-size: 25px;
            color: var(--heart-color);
            /* B·ªè 'infinite' ƒë·ªÉ animation ch·∫°y 1 l·∫ßn r·ªìi JS x√≥a ƒëi */
            animation: fly 10s linear; 
            opacity: 0;
            z-index: 1;
            text-shadow: 0 0 10px var(--glow-color), 0 0 20px var(--glow-color);
            will-change: transform, opacity; /* T·ªëi ∆∞u animation */
        }

        @keyframes fly {
            0% { bottom: -50px; opacity: 1; transform: translateX(0); }
            100% { bottom: 105vh; opacity: 0; transform: translateX(var(--x-end)); }
        }

        @media (max-width: 768px) {
            .input-container h2 {
                font-size: 1.5em;
            }
            #name-input, #submit-btn {
                font-size: 1em;
            }
            .flying-wish {
                font-size: 1em;
            }
            .flying-heart {
                font-size: 20px;
            }
        }
        
    </style>
</head>
<body>
    <div id="star-container"></div>
    <div id="flying-elements-container"></div>
    
    <div id="welcome-overlay">
        <div class="input-container">
            <h2>T·∫∑ng ng∆∞·ªùi ƒë·∫πp m√≥n qu√† n√® ‚ú®</h2>
            <input type="text" id="name-input" placeholder="Ng∆∞·ªùi ƒë·∫πp nh·∫≠p t√™n v√†o ƒë√¢y nha..." autocomplete="off"><br>
            <button id="submit-btn">Nh·∫≠n Qu√† N√®!</button>
        </div>
    </div>

    <div class="scene">
        <canvas id="heart-canvas"></canvas>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            createStars(100);

            const submitBtn = document.getElementById('submit-btn');
            const nameInput = document.getElementById('name-input');
            
            submitBtn.addEventListener('click', startAnimation);
            nameInput.addEventListener('keypress', (event) => {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    startAnimation();
                }
            });
        });

        function startAnimation() {
            let recipientName = document.getElementById('name-input').value.trim() || "b·∫°n hi·ªÅn";
            document.getElementById('welcome-overlay').classList.add('hidden');

            const wishes = [
                `Happy woman's day!`,
                `Ch√∫c ${recipientName} lu√¥n xinh ƒë·∫πp v√† h·∫°nh ph√∫c!`,
                `C·ª© chill th√¥i ${recipientName} ∆°i!`,
                `G·ª≠i ${recipientName} m·ªôt c√°i high-five ·∫£o n√®`,
                `M·ªçi chuy·ªán r·ªìi s·∫Ω ·ªïn th√¥i`,
                `Quan t√¢m ƒë·∫øn b·∫£n th√¢n nhi·ªÅu h∆°n nh√©!`,
                `Keep going, ${recipientName}!`,
                `${recipientName} l√† s·ªë 1!`,
                `M·ªôt ng√†y th·∫≠t vui nh√©, ${recipientName}`,
                `Nghƒ© t·ªõi ${recipientName} l√† th·∫•y vui r·ªìi ^^`,
                `You rock, ${recipientName}!`,
                `C·ªë l√™n nha ${recipientName}`,
                `${recipientName} si√™u ƒë·ªânh lu√¥n!`,
                `G·ª≠i ch√∫t nƒÉng l∆∞·ª£ng t√≠ch c·ª±c cho ${recipientName}`,
                `Ch√∫c ${recipientName} th·∫≠t nhi·ªÅu may m·∫Øn`,
                `H√£y c·ª© l√† ${recipientName}, m·ªôt phi√™n b·∫£n tuy·ªát v·ªùi nh·∫•t`,
                `Ch√∫c ${recipientName} m·ªôt ng√†y tr√†n ƒë·∫ßy nƒÉng l∆∞·ª£ng!`,
                `Sending you a virtual hug`,
                `Lu√¥n t·ªèa s√°ng nh√©!`,
                `Sky hay ƒêom ƒê√≥m?`,
                `L√†m ƒë∆∞·ª£c m√†, c·ªë l√™n!`,
                `You've got this!`,
                `G·ª≠i ${recipientName} m·ªôt ng√†n tr√°i tim <3`,
                `Th·∫ø gi·ªõi t·ªët ƒë·∫πp h∆°n v√¨ c√≥ ${recipientName} ƒë√≥`,
                `Believe in yourself, ${recipientName}!`,
                `${recipientName} x·ª©ng ƒë√°ng v·ªõi nh·ªØng ƒëi·ªÅu t·ªët ƒë·∫πp nh·∫•t`,
                `Keep being your amazing self`,
                `Nay c√≥ chuy·ªán g√¨ vui hong, ${recipientName}?`,
                `Have a wonderful day!`,
                `ƒê·ª´ng qu√™n m·ªâm c∆∞·ªùi nha ${recipientName}`,
                `Shine on, ${recipientName}!`,
                `Ch√∫c m·ªçi ƒëi·ªÅu an l√†nh s·∫Ω ƒë·∫øn v·ªõi ${recipientName}`,
                `You are awesome, ${recipientName}!`,
                `Ch√∫c ${recipientName} ƒë·∫°t ƒë∆∞·ª£c ∆∞·ªõc m∆° c·ªßa m√¨nh`,
                `T√¥i nh·∫Øc em, c∆∞·ªùi nhi·ªÅu l√™n!`,
                `Hahahahahahhahaha!`,
                `Nh·∫∑t 1 nh√†nh hoa r∆°i..., t·∫∑ng ${recipientName}`,
                `N√° n√° na n√†`
            ];
            
            startFlyingWishes(wishes);
            
            // *** THAY ƒê·ªîI: Gi·∫£m t·∫ßn su·∫•t t·∫°o icon ***
            setInterval(createFlyingHeart, 800); // 800ms thay v√¨ 250ms
            
            initCanvasHeart();
        }

        function createStars(count) {
            const container = document.getElementById('star-container');
            for (let i = 0; i < count; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                const size = Math.random() * 2 + 1;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.left = `${Math.random() * 100}%`;
                star.style.animationDelay = `${Math.random() * 5}s`;
                container.appendChild(star);
            }
        }
        
        function startFlyingWishes(wishes) {
            const container = document.getElementById('flying-elements-container');
            let wishIndex = 0;

            setInterval(() => {
                const wishEl = document.createElement('div');
                wishEl.classList.add('flying-wish');
                
                wishEl.textContent = wishes[wishIndex];
                wishIndex = (wishIndex + 1) % wishes.length;

                const startX = Math.random() * 80 + 10;
                const endXDrift = (Math.random() - 0.5) * 400;
                const duration = 10 + Math.random() * 8;

                wishEl.style.left = `${startX}%`;
                wishEl.style.animationDuration = `${duration}s`;
                wishEl.style.setProperty('--x-start', `${(Math.random() - 0.5) * 100}px`);
                wishEl.style.setProperty('--x-end', `${endXDrift}px`);
                
                container.appendChild(wishEl);

                setTimeout(() => {
                    wishEl.remove();
                }, duration * 1000);

            }, 1800);
        }

        function createFlyingHeart() {
            const heartsContainer = document.getElementById('flying-elements-container');
            const heartShapes = ['‚ù§Ô∏è', 'üíñ', 'üíó', '‚ú®', 'üåü', 'üíï'];
            const heart = document.createElement('div');
            heart.classList.add('flying-heart');
            heart.innerText = heartShapes[Math.floor(Math.random() * heartShapes.length)];

            heart.style.left = `${Math.random() * 100}vw`;
            
            // *** THAY ƒê·ªîI: T√≠nh to√°n th·ªùi gian v√† x√≥a ƒëi d·ª©t ƒëi·ªÉm ***
            const duration = 8 + Math.random() * 7;
            const delay = Math.random() * 2;
            
            heart.style.animationDuration = `${duration}s`;
            heart.style.animationDelay = `${delay}s`;
            heart.style.setProperty('--x-end', `${(Math.random() - 0.5) * 400}px`);
            
            heartsContainer.appendChild(heart);
            
            // X√≥a element SAU KHI animation v√† delay k·∫øt th√∫c
            setTimeout(() => heart.remove(), (duration + delay) * 1000 + 100);
        }

        function initCanvasHeart() {
            const canvas = document.getElementById('heart-canvas');
            const ctx = canvas.getContext('2d');
            
            // --- THAY ƒê·ªîI: T·ªëi ∆∞u cho mobile ---
            const isMobile = window.innerWidth <= 768;
            const size = isMobile ? 400 : 600; // Canvas nh·ªè h∆°n cho mobile
            const heartBaseScale = isMobile ? 7 : 10; // K√≠ch th∆∞·ªõc tim nh·ªè h∆°n
            const shadowBlur1 = isMobile ? 30 : 60; // ƒê·ªï b√≥ng nh·∫π h∆°n
            const shadowBlur2 = isMobile ? 10 : 20; // ƒê·ªï b√≥ng nh·∫π h∆°n

            canvas.width = size; 
            canvas.height = size;
            
            const scaleFactor = Math.min(
                window.innerHeight * 0.8 / size, 
                window.innerWidth * 0.9 / size, 
                1
            );
            
            canvas.style.transform = `translate(-50%, -50%) scale(${scaleFactor})`;
            // --- K·∫æT TH√öC THAY ƒê·ªîI ---

            let animationFrame;

            function pointOnHeart(t) {
                // S·ª≠ d·ª•ng heartBaseScale ƒë√£ ƒë∆∞·ª£c t·ªëi ∆∞u
                const x = 16 * Math.pow(Math.sin(t), 3);
                const y = -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
                return { x: x * heartBaseScale, y: y * heartBaseScale };
            }

            function animate() {
                ctx.clearRect(0, 0, size, size);
                ctx.save();
                ctx.translate(size / 2, size / 2);
                const pulse = 1 + Math.sin(Date.now() * 0.005) * 0.08;
                ctx.scale(pulse, pulse);
                const path = new Path2D();
                for (let t = 0; t < 2 * Math.PI; t += 0.01) {
                    const p = pointOnHeart(t);
                    if (t === 0) path.moveTo(p.x, p.y);
                    else path.lineTo(p.x, p.y);
                }
                path.closePath();
                ctx.shadowColor = 'rgba(255, 71, 168, 1)';
                
                // S·ª≠ d·ª•ng gi√° tr·ªã ƒë·ªï b√≥ng ƒë√£ ƒë∆∞·ª£c t·ªëi ∆∞u
                ctx.shadowBlur = shadowBlur1;
                ctx.fillStyle = 'rgba(255, 71, 87, 1)';
                ctx.fill(path);
                
                ctx.shadowBlur = shadowBlur2;
                ctx.fillStyle = 'rgba(255, 100, 150, 1)';
                ctx.fill(path);
                
                ctx.restore();
                animationFrame = requestAnimationFrame(animate);
            }
            if (window.animationFrame) cancelAnimationFrame(window.animationFrame);
            window.animationFrame = requestAnimationFrame(animate);
        }
    </script>
</body>
</html>