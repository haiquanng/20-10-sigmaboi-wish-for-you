<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√≥n Qu√† D√†nh T·∫∑ng B·∫°n üíñ</title>
    <style>
        :root {
            --glow-color: #ff47a8;
            --heart-color: #ff4757;
        }

        body {
            margin: 0;
            height: 100dvh; /* 100dvh t·ªët h∆°n 100vh tr√™n mobile */
            display: flex;
            justify-content: center;
            align-items: center;
            background: radial-gradient(ellipse at center, #2e0b33 0%, #0a000c 70%);
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: white;
        }

        .star {
            position: fixed;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px var(--glow-color);
            animation: twinkle 5s infinite alternate;
        }

        @keyframes twinkle {
            0% { transform: scale(1); opacity: 0.8; }
            100% { transform: scale(0.8); opacity: 0.4; }
        }

        #welcome-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(10, 0, 12, 0.9);
            display: flex; justify-content: center; align-items: center;
            z-index: 100; transition: opacity 1.5s ease-out; flex-direction: column;
            padding: 20px;
            box-sizing: border-box;
        }
        #welcome-overlay.hidden { opacity: 0; pointer-events: none; }
        
        .input-container { 
            text-align: center; 
            color: white; 
            width: 90%;
        }
        
        .input-container h2 { 
            font-size: 2em; 
            text-shadow: 0 0 10px var(--glow-color); 
            margin-bottom: 25px; 
        }
        
        #name-input {
            padding: 12px 20px; 
            font-size: 1.2em; 
            border-radius: 25px;
            border: 2px solid var(--glow-color); 
            background: rgba(255, 255, 255, 0.1);
            color: white; 
            text-align: center; 
            outline: none; 
            transition: box-shadow 0.3s;
            width: 90%; 
            max-width: 400px;
            box-sizing: border-box;
        }
        #name-input:focus { box-shadow: 0 0 15px var(--glow-color); }
        
        #submit-btn {
            padding: 12px 30px; 
            font-size: 1.2em; 
            margin-top: 20px;
            border-radius: 25px; 
            border: none; 
            background: var(--heart-color);
            color: white; 
            cursor: pointer; 
            font-weight: bold; 
            transition: transform 0.2s, background 0.3s;
        }
        #submit-btn:hover { transform: scale(1.05); background: #ff6b81; }

        .scene {
            perspective: 1500px;
            position: relative;
            z-index: 10;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #heart-canvas {
            position: absolute;
            top: 50%; left: 50%;
        }

        .flying-wish {
            position: fixed;
            bottom: -100px;
            font-size: 1.2em;
            font-weight: bold;
            text-shadow: 0 0 8px var(--glow-color), 0 0 16px var(--glow-color);
            white-space: nowrap;
            z-index: 1;
            animation: flyUp 12s linear;
            will-change: transform, opacity; /* T·ªëi ∆∞u animation */
        }

        @keyframes flyUp {
            0% {
                transform: translateY(0) translateX(var(--x-start));
                opacity: 0;
            }
            15% { opacity: 1; }
            85% { opacity: 1; }
            100% {
                transform: translateY(-120vh) translateX(var(--x-end));
                opacity: 0;
            }
        }

        .flying-heart {
            position: fixed;
            bottom: -50px;
            font-size: 25px;
            color: var(--heart-color);
            /* B·ªè 'infinite' ƒë·ªÉ animation ch·∫°y 1 l·∫ßn r·ªìi JS x√≥a ƒëi */
            animation: fly 10s linear; 
            opacity: 0;
            z-index: 1;
            text-shadow: 0 0 10px var(--glow-color), 0 0 20px var(--glow-color);
            will-change: transform, opacity; /* T·ªëi ∆∞u animation */
        }

        @keyframes fly {
            0% { bottom: -50px; opacity: 1; transform: translateX(0); }
            100% { bottom: 105vh; opacity: 0; transform: translateX(var(--x-end)); }
        }

        @media (max-width: 768px) {
            .input-container h2 {
                font-size: 1.5em;
            }
            #name-input, #submit-btn {
                font-size: 1em;
            }
            .flying-wish {
                font-size: 1em;
            }
            .flying-heart {
                font-size: 20px;
            }
        }

        #music-player {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 200;
            background: rgba(10, 0, 12, 0.95);
            border: 2px solid var(--glow-color);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 0 20px var(--glow-color), 0 0 40px rgba(255, 71, 168, 0.5);
            transition: all 0.3s ease;
            width: 90%;
            max-width: 600px;
        }

        /* Player is always visible (no minimized/toggle state) */
        #music-player .player-content {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 20px;
            border-radius: 10px;
            width: 100%;
            max-width: 600px;
        }

        .song-info {
            text-align: left;
            margin-bottom: 0;
            padding: 10px;
            background: rgba(255, 71, 168, 0.1);
            border-radius: 10px;
            flex: 1;
            min-width: 200px;
        }

        .song-title {
            font-size: 1.1em;
            font-weight: bold;
            color: white;
            text-shadow: 0 0 10px var(--glow-color);
            margin-bottom: 5px;
        }

        .song-artist {
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.7);
        }

        .player-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin: 0;
            flex-shrink: 0;
        }

        .control-btn {
            background: rgba(255, 71, 168, 0.3);
            border: 2px solid var(--glow-color);
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .control-btn:hover {
            background: rgba(255, 71, 168, 0.5);
            transform: scale(1.1);
        }

        .control-btn.play-pause {
            width: 55px;
            height: 55px;
            font-size: 1.5em;
            background: var(--heart-color);
        }

        .progress-container {
            margin: 15px 0 0 0;
            width: 100%;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--glow-color), var(--heart-color));
            border-radius: 3px;
            width: 0%;
            transition: width 0.1s;
            box-shadow: 0 0 10px var(--glow-color);
        }

        .time-display {
            display: flex;
            justify-content: space-between;
            font-size: 0.85em;
            color: rgba(255, 255, 255, 0.6);
            margin-top: 5px;
        }

        .playlist {
            max-height: 150px;
            overflow-y: auto;
            margin-top: 10px;
        }

        .playlist-item {
            padding: 10px;
            margin: 5px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid transparent;
        }

        .playlist-item:hover {
            background: rgba(255, 71, 168, 0.2);
            border-color: var(--glow-color);
        }

        .playlist-item.active {
            background: rgba(255, 71, 168, 0.3);
            border-color: var(--glow-color);
            box-shadow: 0 0 15px rgba(255, 71, 168, 0.5);
        }

        .playlist-item-title {
            font-weight: bold;
            color: white;
            font-size: 0.95em;
        }

        .playlist-item-artist {
            font-size: 0.8em;
            color: rgba(255, 255, 255, 0.6);
            margin-top: 3px;
        }

        .music-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            gap: 10px;
        }

        /* top music-controls removed (no toggle) */

        .music-label {
            color: white;
            font-size: 0.9em;
            text-shadow: 0 0 5px var(--glow-color);
            flex: 1;
        }

        /* removed toggle button styles (player shows by default) */

        @media (max-width: 768px) {
            #music-player {
                bottom: 10px;
                right: 10px;
                left: 10px;
                width: calc(100vw - 20px);
                max-width: none;
            }

            #music-player .player-content {
                flex-direction: column;
                gap: 15px;
                max-width: none;
            }

            .song-info {
                text-align: center;
                min-width: auto;
            }

            .control-btn {
                width: 40px;
                height: 40px;
                font-size: 1.1em;
            }

            .control-btn.play-pause {
                width: 48px;
                height: 48px;
                font-size: 1.3em;
            }

            /* removed minimized styles for mobile */
        }
        
    </style>
</head>
<body>
    <div id="star-container"></div>
    <div id="flying-elements-container"></div>
    
    <div id="welcome-overlay">
        <div class="input-container">
            <h2>T·∫∑ng ng∆∞·ªùi ƒë·∫πp m√≥n qu√† n√® ‚ú®</h2>
            <input type="text" id="name-input" placeholder="Ng∆∞·ªùi ƒë·∫πp nh·∫≠p t√™n v√†o ƒë√¢y nha..." autocomplete="off"><br>
            <button id="submit-btn">Nh·∫≠n Qu√† N√®!</button>
        </div>
    </div>

    <div class="scene">
        <canvas id="heart-canvas"></canvas>
    </div>

    <div id="music-player">
        <div class="music-controls">
            <span class="music-label">üéµ Nh·∫°c n√¨</span>
        </div>
        <div class="player-content">
            <div class="song-info">
                <div class="song-title" id="current-song-title">ƒê√¢u ai d√°m h·ª©a</div>
                <div class="song-artist" id="current-song-artist">B√†i 1/2</div>
            </div>

            <div class="player-controls">
                <button class="control-btn" id="prev-btn" title="B√†i tr∆∞·ªõc">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-skip-back-icon lucide-skip-back"><path d="M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z"/><path d="M3 20V4"/></svg>
                </button>
                <button class="control-btn play-pause" id="play-pause-btn" title="Ph√°t/T·∫°m d·ª´ng">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-play-icon lucide-play"><path d="M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z"/></svg>
                </button>
                <button class="control-btn" id="next-btn" title="B√†i ti·∫øp">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-skip-forward-icon lucide-skip-forward"><path d="M21 4v16"/><path d="M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z"/></svg>
                </button>
            </div>
        </div>

        <div class="progress-container">
            <div class="progress-bar" id="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="time-display">
                <span id="current-time">0:00</span>
                <span id="duration">0:00</span>
            </div>
        </div>

        <audio id="audio-player"></audio>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            createStars(100);

            const submitBtn = document.getElementById('submit-btn');
            const nameInput = document.getElementById('name-input');
            
            submitBtn.addEventListener('click', startAnimation);
            nameInput.addEventListener('keypress', (event) => {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    startAnimation();
                }
            });

            // Music Player
            initMusicPlayer();
        });

        function initMusicPlayer() {
            const musicPlayer = document.getElementById('music-player');
            const audio = document.getElementById('audio-player');
            const playPauseBtn = document.getElementById('play-pause-btn');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const progressBar = document.getElementById('progress-bar');
            const progressFill = document.getElementById('progress-fill');
            const currentTimeEl = document.getElementById('current-time');
            const durationEl = document.getElementById('duration');
            const songTitle = document.getElementById('current-song-title');
            const songArtist = document.getElementById('current-song-artist');
            const playlistItems = document.querySelectorAll('.playlist-item');

            let currentSongIndex = 0;

            const playlist = [
                { title: 'ƒê√¢u ai d√°m h·ª©a', file: 'music.mp3' },
                { title: 'N∆°i n√†y c√≥ anh', file: 'music2.mp3' }
            ];

            loadSong(currentSongIndex);
            playPauseBtn.addEventListener('click', togglePlayPause);
            
            function togglePlayPause() {
                if (audio.paused) {
                    audio.play().then(() => {
                        playPauseBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pause-icon lucide-pause"><rect x="14" y="3" width="5" height="18" rx="1"/><rect x="5" y="3" width="5" height="18" rx="1"/></svg>';
                    }).catch(err => console.log('Playback prevented:', err));
                } else {
                    audio.pause();
                    playPauseBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-play-icon lucide-play"><path d="M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z"/></svg>';
                }
            }

            prevBtn.addEventListener('click', () => {
                currentSongIndex = (currentSongIndex - 1 + playlist.length) % playlist.length;
                loadSong(currentSongIndex);
                audio.play();
            });

            nextBtn.addEventListener('click', () => {
                currentSongIndex = (currentSongIndex + 1) % playlist.length;
                loadSong(currentSongIndex);
                audio.play();
            });

            audio.addEventListener('ended', () => {
                currentSongIndex = (currentSongIndex + 1) % playlist.length;
                loadSong(currentSongIndex);
                audio.play();
            });

            audio.addEventListener('timeupdate', () => {
                if (audio.duration) {
                    const progress = (audio.currentTime / audio.duration) * 100;
                    progressFill.style.width = progress + '%';
                    currentTimeEl.textContent = formatTime(audio.currentTime);
                }
            });

            audio.addEventListener('loadedmetadata', () => {
                durationEl.textContent = formatTime(audio.duration);
            });

            progressBar.addEventListener('click', (e) => {
                const rect = progressBar.getBoundingClientRect();
                const percent = (e.clientX - rect.left) / rect.width;
                audio.currentTime = percent * audio.duration;
            });

            playlistItems.forEach(item => {
                item.addEventListener('click', () => {
                    const index = parseInt(item.dataset.index);
                    currentSongIndex = index;
                    loadSong(currentSongIndex);
                    audio.play();
                });
            });

            function loadSong(index) {
                const song = playlist[index];
                audio.src = song.file;
                songTitle.textContent = song.title;
                songArtist.textContent = `B√†i ${index + 1}/${playlist.length}`;
                
                playlistItems.forEach((item, i) => {
                    if (i === index) {
                        item.classList.add('active');
                    } else {
                        item.classList.remove('active');
                    }
                });
                
                playPauseBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-play-icon lucide-play"><path d="M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z"/></svg>';
            }

            function formatTime(seconds) {
                if (isNaN(seconds)) return '0:00';
                const mins = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            }
        }

        function startAnimation() {
            let recipientName = document.getElementById('name-input').value.trim() || "b·∫°n hi·ªÅn";
            document.getElementById('welcome-overlay').classList.add('hidden');

            const wishes = [
                `Happy woman's day!`,
                `Ch√∫c ${recipientName} lu√¥n xinh ƒë·∫πp v√† h·∫°nh ph√∫c!`,
                `C·ª© chill th√¥i ${recipientName} ∆°i!`,
                `G·ª≠i ${recipientName} m·ªôt c√°i high-five ·∫£o n√®`,
                `M·ªçi chuy·ªán r·ªìi s·∫Ω ·ªïn th√¥i`,
                `Quan t√¢m ƒë·∫øn b·∫£n th√¢n nhi·ªÅu h∆°n nh√©!`,
                `Keep going, ${recipientName}!`,
                `${recipientName} l√† s·ªë 1!`,
                `M·ªôt ng√†y th·∫≠t vui nh√©, ${recipientName}`,
                `Nghƒ© t·ªõi ${recipientName} l√† th·∫•y vui r·ªìi ^^`,
                `You rock, ${recipientName}!`,
                `C·ªë l√™n nha ${recipientName}`,
                `${recipientName} si√™u ƒë·ªânh lu√¥n!`,
                `G·ª≠i ch√∫t nƒÉng l∆∞·ª£ng t√≠ch c·ª±c cho ${recipientName}`,
                `Ch√∫c ${recipientName} th·∫≠t nhi·ªÅu may m·∫Øn`,
                `H√£y c·ª© l√† ${recipientName}, m·ªôt phi√™n b·∫£n tuy·ªát v·ªùi nh·∫•t`,
                `Ch√∫c ${recipientName} m·ªôt ng√†y tr√†n ƒë·∫ßy nƒÉng l∆∞·ª£ng!`,
                `Sending you a virtual hug`,
                `Lu√¥n t·ªèa s√°ng nh√©!`,
                `Sky hay ƒêom ƒê√≥m?`,
                `L√†m ƒë∆∞·ª£c m√†, c·ªë l√™n!`,
                `You've got this!`,
                `G·ª≠i ${recipientName} m·ªôt ng√†n tr√°i tim <3`,
                `Th·∫ø gi·ªõi t·ªët ƒë·∫πp h∆°n v√¨ c√≥ ${recipientName} ƒë√≥`,
                `Believe in yourself, ${recipientName}!`,
                `${recipientName} x·ª©ng ƒë√°ng v·ªõi nh·ªØng ƒëi·ªÅu t·ªët ƒë·∫πp nh·∫•t`,
                `Keep being your amazing self`,
                `Nay c√≥ chuy·ªán g√¨ vui hong, ${recipientName}?`,
                `Have a wonderful day!`,
                `ƒê·ª´ng qu√™n m·ªâm c∆∞·ªùi nha ${recipientName}`,
                `Shine on, ${recipientName}!`,
                `Ch√∫c m·ªçi ƒëi·ªÅu an l√†nh s·∫Ω ƒë·∫øn v·ªõi ${recipientName}`,
                `You are awesome, ${recipientName}!`,
                `Ch√∫c ${recipientName} ƒë·∫°t ƒë∆∞·ª£c ∆∞·ªõc m∆° c·ªßa m√¨nh`,
                `T√¥i nh·∫Øc em, c∆∞·ªùi nhi·ªÅu l√™n!`,
                `Hahahahahahhahaha!`,
                `Nh·∫∑t 1 nh√†nh hoa r∆°i..., t·∫∑ng ${recipientName}`,
                `N√° n√° na n√†`
            ];
            
            startFlyingWishes(wishes);
            
            // *** THAY ƒê·ªîI: Gi·∫£m t·∫ßn su·∫•t t·∫°o icon ***
            setInterval(createFlyingHeart, 800); // 800ms thay v√¨ 250ms
            
            initCanvasHeart();
        }

        function createStars(count) {
            const container = document.getElementById('star-container');
            for (let i = 0; i < count; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                const size = Math.random() * 2 + 1;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.left = `${Math.random() * 100}%`;
                star.style.animationDelay = `${Math.random() * 5}s`;
                container.appendChild(star);
            }
        }
        
        function startFlyingWishes(wishes) {
            const container = document.getElementById('flying-elements-container');
            let wishIndex = 0;

            setInterval(() => {
                const wishEl = document.createElement('div');
                wishEl.classList.add('flying-wish');
                
                wishEl.textContent = wishes[wishIndex];
                wishIndex = (wishIndex + 1) % wishes.length;

                const startX = Math.random() * 80 + 10;
                const endXDrift = (Math.random() - 0.5) * 400;
                const duration = 10 + Math.random() * 8;

                wishEl.style.left = `${startX}%`;
                wishEl.style.animationDuration = `${duration}s`;
                wishEl.style.setProperty('--x-start', `${(Math.random() - 0.5) * 100}px`);
                wishEl.style.setProperty('--x-end', `${endXDrift}px`);
                
                container.appendChild(wishEl);

                setTimeout(() => {
                    wishEl.remove();
                }, duration * 1000);

            }, 1800);
        }

        function createFlyingHeart() {
            const heartsContainer = document.getElementById('flying-elements-container');
            const heartShapes = ['‚ù§Ô∏è', 'üíñ', 'üíó', '‚ú®', 'üåü', 'üíï'];
            const heart = document.createElement('div');
            heart.classList.add('flying-heart');
            heart.innerText = heartShapes[Math.floor(Math.random() * heartShapes.length)];

            heart.style.left = `${Math.random() * 100}vw`;
            
            // *** THAY ƒê·ªîI: T√≠nh to√°n th·ªùi gian v√† x√≥a ƒëi d·ª©t ƒëi·ªÉm ***
            const duration = 8 + Math.random() * 7;
            const delay = Math.random() * 2;
            
            heart.style.animationDuration = `${duration}s`;
            heart.style.animationDelay = `${delay}s`;
            heart.style.setProperty('--x-end', `${(Math.random() - 0.5) * 400}px`);
            
            heartsContainer.appendChild(heart);
            
            // X√≥a element SAU KHI animation v√† delay k·∫øt th√∫c
            setTimeout(() => heart.remove(), (duration + delay) * 1000 + 100);
        }

        function initCanvasHeart() {
            const canvas = document.getElementById('heart-canvas');
            const ctx = canvas.getContext('2d');
            
            // --- THAY ƒê·ªîI: T·ªëi ∆∞u cho mobile ---
            const isMobile = window.innerWidth <= 768;
            const size = isMobile ? 400 : 600; // Canvas nh·ªè h∆°n cho mobile
            const heartBaseScale = isMobile ? 7 : 10; // K√≠ch th∆∞·ªõc tim nh·ªè h∆°n
            const shadowBlur1 = isMobile ? 30 : 60; // ƒê·ªï b√≥ng nh·∫π h∆°n
            const shadowBlur2 = isMobile ? 10 : 20; // ƒê·ªï b√≥ng nh·∫π h∆°n

            canvas.width = size; 
            canvas.height = size;
            
            const scaleFactor = Math.min(
                window.innerHeight * 0.8 / size, 
                window.innerWidth * 0.9 / size, 
                1
            );
            
            canvas.style.transform = `translate(-50%, -50%) scale(${scaleFactor})`;
            // --- K·∫æT TH√öC THAY ƒê·ªîI ---

            let animationFrame;

            function pointOnHeart(t) {
                // S·ª≠ d·ª•ng heartBaseScale ƒë√£ ƒë∆∞·ª£c t·ªëi ∆∞u
                const x = 16 * Math.pow(Math.sin(t), 3);
                const y = -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
                return { x: x * heartBaseScale, y: y * heartBaseScale };
            }

            function animate() {
                ctx.clearRect(0, 0, size, size);
                ctx.save();
                ctx.translate(size / 2, size / 2);
                const pulse = 1 + Math.sin(Date.now() * 0.005) * 0.08;
                ctx.scale(pulse, pulse);
                const path = new Path2D();
                for (let t = 0; t < 2 * Math.PI; t += 0.01) {
                    const p = pointOnHeart(t);
                    if (t === 0) path.moveTo(p.x, p.y);
                    else path.lineTo(p.x, p.y);
                }
                path.closePath();
                ctx.shadowColor = 'rgba(255, 71, 168, 1)';
                
                // S·ª≠ d·ª•ng gi√° tr·ªã ƒë·ªï b√≥ng ƒë√£ ƒë∆∞·ª£c t·ªëi ∆∞u
                ctx.shadowBlur = shadowBlur1;
                ctx.fillStyle = 'rgba(255, 71, 87, 1)';
                ctx.fill(path);
                
                ctx.shadowBlur = shadowBlur2;
                ctx.fillStyle = 'rgba(255, 100, 150, 1)';
                ctx.fill(path);
                
                ctx.restore();
                animationFrame = requestAnimationFrame(animate);
            }
            if (window.animationFrame) cancelAnimationFrame(window.animationFrame);
            window.animationFrame = requestAnimationFrame(animate);
        }
    </script>
</body>
</html>